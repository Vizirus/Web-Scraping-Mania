{"version":3,"sources":["cms-2-rubicon.js"],"names":["DATAXU","cookie","cookiePrefix","Matcher","matcherDetails","property","this","excludedExchanges","push","prototype","daysToLive","matchersConfig","vendor_id","cookieSuffix","url","matchOnError","excludedBrowsers","safari","firePixel","helper","argument","pixelObj","pixel","document","createElement","pixelHelper","parameter","onload","onerror","e","Math","floor","random","src","getParameter","extractedValue","RegExp","exec","window","location","href","getFutureTime","futureDate","Date","setTime","getTime","getMatcherURL","matcher","userID","gdpr","gdpr_consent","replace","parseInt","processCookies","w55cCookie","match","matchesCount","matcherIndex","userAgent","eiParameter","cookieId","browser","navigator","toLowerCase","indexOf","length","currentMatcher","timeToLive","toUTCString","setDataxuCookie"],"mappings":"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","file":"cms-2-rubicon.min.js","sourcesContent":["\n/* Rubicon */\n/* Version: 3.1.0/1.1.2/1.1.31 */\n\nvar DATAXU = (function() {\n  var domain = '.w55c.net',\n    pingUrl = 'pm.w55c.net/pingmatch.gif',\n    maxMatches = 2,\n    cookie = 'wfivefivec',\n    optoutCookie = 'optout',\n    cookiePrefix = 'match',\n    token = '{w55c}',\n    ttlToken = '{epocexpiration}';\n\n  var Matcher = function(matcherDetails) {\n    for (var property in matcherDetails) {\n      this[property] = matcherDetails[property];\n    }\n    this.excludedExchanges = matcherDetails.excludedExchanges || [];\n    this.excludedExchanges.push('PRIVATE');\n    };\n\n  Matcher.prototype = {\n    daysToLive: 30\n  };\n\n  var matchersConfig = [\n     \n    new Matcher({\n      vendor_id: 0,\n      cookieSuffix: 'google',\n      url: 'pm.w55c.net/m.gif?rurl=//cm.g.doubleclick.net/pixel?google_nid=9675309&google_hm=_wfivefivec64esc_&google_cm'\n    }), \n    new Matcher({\n      vendor_id: 385,\n      cookieSuffix: 'bluekai',\n      url: 'tags.bluekai.com/site/2964?id={w55c}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK']\n    }), \n    new Matcher({\n      vendor_id: 10,\n      cookieSuffix: 'casale',\n      url: 'dsum-sec.casalemedia.com/rum?cm_dsp_id=47&external_user_id={w55c}&gdpr={gdpr}&gdpr_consent={gdpr_consent}&expiration={epocexpiration}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK', 'YAHOO']\n    }), \n    new Matcher({\n      vendor_id: 97,\n      cookieSuffix: 'liveramp',\n      url: 'idsync.rlcdn.com/385636.gif?partner_uid={w55c}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK', 'YAHOO']\n    }), \n    new Matcher({\n      vendor_id: 52,\n      cookieSuffix: 'rubicon',\n      url: 'pixel.rubiconproject.com/tap.php?v=4210&nid=1523&put={w55c}&expires=10',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK', 'YAHOO']\n    }), \n    new Matcher({\n      vendor_id: 89,\n      cookieSuffix: 'tapad',\n      url: 'tapestry.tapad.com/tapestry/1?ta_partner_id=1011&ta_partner_did={w55c}&ta_format=png&gdpr={gdpr}&gdpr_consent={gdpr_consent}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK'],\n      daysToLive: 5 \n    }), \n    new Matcher({\n      vendor_id: 25,\n      cookieSuffix: 'yahoo',\n      url: 'ups.analytics.yahoo.com/ups/56554/sync?uid={w55c}&_origin=1&gdpr={gdpr}&gdpr_consent={gdpr_consent}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK']\n    }), \n    new Matcher({\n      vendor_id: 0,\n      cookieSuffix: 'bp',\n      url: 'px.britepool.com/sync?partner_id=dx&ppid={w55c}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK'],\n      matchOnError: true \n    }), \n    new Matcher({\n      vendor_id: 565,\n      cookieSuffix: 'demdex',\n      url: 'dpm.demdex.net/ibs:dpid=359&dpuuid={w55c}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK']\n    }), \n    new Matcher({\n      vendor_id: 32,\n      cookieSuffix: 'an',\n      url: 'ib.adnxs.com/setuid?entity=17&code={w55c}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK', 'YAHOO'],\n      matchOnError: true \n    }), \n    new Matcher({\n      vendor_id: 506,\n      cookieSuffix: 'krux',\n      url: 'beacon.krxd.net/usermatch.gif?partner=dataxu&uid={w55c}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK', 'YAHOO'],\n      matchOnError: true \n    }), \n    new Matcher({\n      vendor_id: 285,\n      cookieSuffix: 'freewheel',\n      url: 'ads.stickyadstv.com/user-registering?dataProviderId=593&userId={w55c}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK', 'YAHOO']\n    }), \n    new Matcher({\n      vendor_id: 468,\n      cookieSuffix: 'targus',\n      url: 'aa.agkn.com/adscores/g.pixel?sid=9232829800&dx={w55c}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK', 'YAHOO'],\n        excludedBrowsers: {\n          safari: true \n        }\n    }), \n    new Matcher({\n      vendor_id: 202,\n      cookieSuffix: 'tremor',\n      url: 'partners.tremorhub.com/sync?UIDX={w55c}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK', 'YAHOO']\n    }), \n    new Matcher({\n      vendor_id: 165,\n      cookieSuffix: 'spotx',\n      url: 'sync.search.spotxchange.com/partner?adv_id=6465&uid={w55c}&img=1',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK', 'YAHOO'],\n      matchOnError: true \n    }), \n    new Matcher({\n      vendor_id: 373,\n      cookieSuffix: 'exelate',\n      url: 'loadus.exelator.com/load/?p=204&g=111&j=0&bi={w55c}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK', 'YAHOO']\n    }), \n    new Matcher({\n      vendor_id: 98,\n      cookieSuffix: 'groupm',\n      url: 'odr.mookie1.com/t/v2?tagid=V2_397141&src.visitorid={w55c}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK']\n    }), \n    new Matcher({\n      vendor_id: 25,\n      cookieSuffix: 'onemobile',\n      url: 'pixel.advertising.com/ups/56554/sync?uid={w55c}&_origin=1&gdpr={gdpr}&gdpr_consent={gdpr_consent}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK'],\n      matchOnError: true \n    }), \n    new Matcher({\n      vendor_id: 77,\n      cookieSuffix: 'comscore',\n      url: 'ads.scorecardresearch.com/p?c1=9&c2=13026508&c3=2&cs_xi={w55c}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK']\n    }), \n    new Matcher({\n      vendor_id: 69,\n      cookieSuffix: 'openx',\n      url: 'us-u.openx.net/w/1.0/sd?id=537072979&val={w55c}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK', 'YAHOO']\n    }), \n    new Matcher({\n      vendor_id: 131,\n      cookieSuffix: 'id5',\n      url: 'id5-sync.com/s/163/1.gif?puid={w55c}&gdpr={gdpr}&gdpr_consent={gdpr_consent}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK', 'YAHOO']\n    }), \n    new Matcher({\n      vendor_id: 0,\n      cookieSuffix: 'twitter',\n      url: 'analytics.twitter.com/i/adsct?p_user_id={w55c}&p_id=87453',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK', 'YAHOO']\n    }), \n    new Matcher({\n      vendor_id: 0,\n      cookieSuffix: 'xaxis',\n      url: 't.mookie1.com/t/v1/event?migClientId=6040&migAction=synch&migSource=mig&migParam1={w55c}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK']\n    }), \n    new Matcher({\n      vendor_id: 28,\n      cookieSuffix: 'triplelift',\n      url: 'eb2.3lift.com/xuid?mid=6019&xuid={w55c}&dongle=465e',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK']\n    }), \n    new Matcher({\n      vendor_id: 76,\n      cookieSuffix: 'pubmatic',\n      url: 'image2.pubmatic.com/AdServer/Pug?vcode=bz0yJnR5cGU9MSZjb2RlPTU3MSZ0bD0xNTc2ODAw&piggybackCookie=uid:{w55c}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK', 'YAHOO']\n    }), \n    new Matcher({\n      vendor_id: 80,\n      cookieSuffix: 'sharethrough',\n      url: 'match.sharethrough.com/sync/v1?source_id=YnUBs5Yz9Zqjy9VCcoCxquFP&source_user_id={w55c}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK', 'YAHOO']\n    }), \n    new Matcher({\n      vendor_id: 142,\n      cookieSuffix: 'medianet',\n      url: 'contextual.media.net/cksync.php?cs=3&type=dxu&ovsid={w55c}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK'],\n      matchOnError: true \n    }), \n    new Matcher({\n      vendor_id: 21,\n      cookieSuffix: 'tradedesk',\n      url: 'match.adsrvr.org/track/cmf/generic?ttd_pid=fth6htg&ttd_tpi=1',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK']\n    }), \n    new Matcher({\n      vendor_id: 81,\n      cookieSuffix: 'contextweb',\n      url: 'bh.contextweb.com/bh/rtset?do=add&pid=535039&ev={w55c}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK', 'YAHOO']\n    }), \n    new Matcher({\n      vendor_id: 531,\n      cookieSuffix: 'smartx',\n      url: 'ad.sxp.smartclip.net/sync?type=host&dsp=77&dspuuid={w55c}',\n      excludedExchanges: ['GOOGLE', 'GOOGLE_CONTENTNETWORK']\n    })];\n\n  var firePixel = function(url, helper, argument) {\n    var pixelObj = {\n      pixel: document.createElement('img'),\n      pixelHelper: helper,\n      parameter: argument\n    };\n\n    pixelObj.pixel.onload = function() {\n      console.log('Loaded pixel: ' + this.src);\n      if (pixelObj.pixelHelper) pixelObj.pixelHelper(pixelObj.parameter); // example: set the match cookie\n    };\n\n    pixelObj.pixel.onerror = function(e) {\n      if (pixelObj.parameter && matchersConfig[pixelObj.parameter] && matchersConfig[pixelObj.parameter].matchOnError) {\n        console.log('matching on error for ' + this.src);\n        pixelObj.pixelHelper(pixelObj.parameter);\n      } else {\n        if (Math.floor(Math.random() / 0.0001) === 1 || false) {\n          firePixel('//tags.w55c.net/rs?id=df6db6d41b074b19ad034f08ae3b3636&t=cart&sku=$SKUS', function() {\n            console.log('error pixel fired');\n          }, null);\n        }\n        console.error('in onerror while loading pixel: ' + this.src);\n      }\n    };\n\n    pixelObj.pixel.src = url;\n    console.log('Pixel Fired: ' + pixelObj.pixel.src);\n  };\n\n  var canFire = function(excludedExchanges) {\n    var eiParameter = getParameter('ei');\n    return excludedExchanges.indexOf(eiParameter) === -1 ? true : false;\n  };\n\n  var getParameter = function(parameter) {\n    var extractedValue = RegExp('[\\\\?&]' + parameter + '=([^&#]*)').exec(window.location.href);\n    return null === extractedValue ? '' : extractedValue[1];\n  };\n\n  var setMatcherCookie = function(matcherIndex) {\n    var matcher = matchersConfig[matcherIndex],\n      timeToLive = getFutureTime(matcher.daysToLive).toUTCString();\n    document.cookie = cookiePrefix + matcher.cookieSuffix + '=3; expires=' + timeToLive + '; path=/; domain=' + domain + '; SameSite=None; Secure';\n    console.log('Cookies: ' + document.cookie);\n  };\n\n  var getFutureTime = function(daysToLive) {\n    var futureDate = new Date(),\n      secondsInADay = 86400000;\n    futureDate.setTime(secondsInADay * daysToLive + futureDate.getTime());\n    return futureDate;\n  };\n\n  var genUrl = function(url) {\n    console.log('Url Generated: ' + 'https://' + url);\n    return 'https://' + url;\n  };\n\n  var getMatcherURL = function(matcher, userID) {\n    // Always do secure cookie-matching. We should no longer have any cookie-match partners who only do non-secure http.\n    url = 'https://' + matcher.url;\n\n    var gdpr = getParameter('gdpr'),\n        gdpr_consent = getParameter('gdpr_consent');\n\n    if (gdpr == 1) {\n      url = url.replace(\"{gdpr}\", gdpr);\n    } else {\n      url = url.replace(\"{gdpr}\", 0);\n    }\n\n    if (gdpr_consent) {\n      url = url.replace(\"{gdpr_consent}\", gdpr_consent);\n    } else {\n      url = url.replace(\"{gdpr_consent}\", '');\n    }\n\n    url = url.replace(ttlToken, parseInt(getFutureTime(matcher.daysToLive).getTime() / 1000));\n    return url.replace(token, userID);\n  };\n\n  var setDataxuCookie = function() {\n    var w55cCookie = document.cookie.match('(?:^|;[ \\t]*)' + cookie + '=([^;]*)(?:;|$)');\n    if (w55cCookie == null) {\n      firePixel(genUrl(pingUrl), function() {\n        var w55cCookie = document.cookie.match('(?:^|;[ \\t]*)' + cookie + '=([^;]*)(?:;|$)');\n        processCookies(w55cCookie);\n      }, null);\n    } else {\n      processCookies(w55cCookie);\n    }\n  };\n  /**\n   * Detect the current browser\n   * @param  {[String]}  userAgent : User Agent of the browser\n   * @return {String}  Name of the browser\n   */\n  var getBrowser = function(userAgent) {\n    userAgent = userAgent.toLowerCase();\n\n\n    if((userAgent.indexOf('safari') !== -1) && (userAgent.indexOf('chrom') === -1)) {\n      return 'safari';\n    } else if((userAgent.indexOf('chrome') !== -1) && (userAgent.indexOf('chromium') === -1)) {\n      return 'chrome';\n    } else if((userAgent.indexOf('firefox') !== -1) && (userAgent.indexOf('seamonkey') === -1)) {\n      return 'firefox';\n    }\n\n    return null;\n  };\n\n  var processCookies = function(w55cCookie) {\n    if (w55cCookie == null) {\n      if (Math.floor(Math.random() / 0.0001) === 1) {\n          firePixel('//tags.w55c.net/rs?id=f411a36e1e814c1f8363db729b3deaf5&t=cart&sku=$SKUS', function() {\n            console.log('3rd party cookies failure pixel fired');\n          }, null);\n      }\n      return;\n    }\n\n    var optedOut = document.cookie.match('(?:^|;[ \\t]*)' + optoutCookie + '=([^;]*)(?:;|$)');\n    if (optedOut != null) {\n      // Don't match opted out users.\n      return;\n    }\n\n    var url = '',\n      matchesCount,\n      matcherIndex,\n      //extract w55c Cookie Value\n      cookieId = w55cCookie[1],\n      browser = getBrowser(window.navigator.userAgent);\n\n    for (matcherIndex = matchesCount = 0; matcherIndex < matchersConfig.length && matchesCount < maxMatches; matcherIndex++) {\n      url = '';\n      //get the current matcher(partner)\n      var currentMatcher = matchersConfig[matcherIndex];\n\n      //check if the match<partner> cookie is set\n      if (document.cookie.indexOf(cookiePrefix + currentMatcher.cookieSuffix + \"=\") === -1) {\n        if (canFire(currentMatcher.excludedExchanges)) {\n          url = getMatcherURL(currentMatcher, cookieId);\n        }\n      }\n\n      if(browser && currentMatcher.excludedBrowsers && currentMatcher.excludedBrowsers[browser]) {\n        console.log(currentMatcher.cookieSuffix + ' is incompatible with ' + browser + '. Not fired');\n      } else {\n        //set the match cookie\n        if (url !== '') {\n          firePixel(url, function(matcherIndex) {\n            setMatcherCookie(matcherIndex);\n          }, matcherIndex);\n          matchesCount++;\n        }\n      }\n    }\n   if (Math.floor(Math.random()*1000) === 1 || false) {\n     firePixel('https://tags.w55c.net/rs?id=bdbbc1767a1f4a9f9567245a0271e803&t=homepage', function() {},'');\n     console.log('1/1000 pixel fired');\n   }\n\n    return;\n  };\n  \n  return {\n    setDataxuCookie: setDataxuCookie\n  };\n})();\nconsole.log('Cookies: ' + document.cookie);\nwindow.DATAXU.setDataxuCookie();\n"]}